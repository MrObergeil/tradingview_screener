# TV Screener+ Progress Log

This file tracks learnings, decisions, and important notes from each completed task.
It serves as institutional knowledge for anyone continuing work on this codebase.

Last Updated: January 2025

---

## How to Read This File

- Entries are appended chronologically (newest at bottom)
- Each entry includes: Task ID, Date, Key Learnings
- Search for specific topics using Ctrl+F
- Critical warnings marked with [!]

---

## Project Setup

### Initial Planning (January 2025)

**Decisions Made:**
- Architecture: Python (FastAPI) + TypeScript (Fastify/React) hybrid
- Database: SQLite with better-sqlite3 (added in Phase B, not MVP)
- MVP approach: In-memory first, persistence later
- Development: Direct (no Docker), hot-reload enabled

**Key Documents (in `docs/`):**
- `spec_v2.md` - Full specification with all requirements
- `tv-screener-implementation-plan.md` - Sprint-by-sprint implementation plan
- `progress.txt` - This file (append-only learning log)
- `planner.md` - Planning agent template (reference)

**Workflow:**
- PLAN MODE: Discuss approach before coding
- BUILD MODE: Implement after agreement
- Tests written per task

---

## Sprint Progress

(Entries will be appended below as tasks are completed)

---

### Task 1.1: Initialize Project Structure
**Date:** January 2025
**Status:** Completed

**What was done:**
- Created monorepo folder structure: `screener-service/`, `app/`, `docs/`
- Moved all spec/planning files to `docs/` folder
- Created `AGENTS.md` at root with instructions for AI agents
- Created `.gitignore` for Python + Node.js artifacts

**Key Learnings:**
- Keep documentation centralized in `docs/` for easy discovery
- `AGENTS.md` ensures any AI agent reads specs before making changes
- Empty placeholder files (`__init__.py`, `requirements.txt`, `package.json`) help establish structure

**File Locations:**
- Specs and plans: `docs/`
- Python service: `screener-service/src/`
- TypeScript backend: `app/src/server/`
- React frontend: `app/src/client/`

---

### Task 1.2: Implement Python Health Endpoint
**Date:** January 2025
**Status:** Completed

**What was done:**
- Set up devenv at project root (Python 3.11 + Node 20)
- Created FastAPI application with health endpoint
- Added pytest tests for health endpoint

**Files Created:**
- `devenv.nix` - Nix-based dev environment (Python + Node)
- `devenv.yaml` - devenv configuration
- `.envrc` - direnv auto-activation
- `screener-service/src/config.py` - Settings with pydantic-settings
- `screener-service/src/main.py` - FastAPI app entry point
- `screener-service/src/routes.py` - /health endpoint
- `screener-service/tests/test_health.py` - Endpoint tests
- `screener-service/pytest.ini` - Pytest configuration

**Key Learnings:**
- devenv.nix at project root provides unified dev environment for Python + Node
- Use `pydantic-settings` for type-safe configuration from env vars
- FastAPI test client uses `httpx.AsyncClient` with `ASGITransport`
- [!] Remember to add `sys.path` manipulation in tests to import from `src/`

**How to Run:**
```bash
# Enter devenv shell (auto-activates with direnv)
devenv shell

# Or manually:
cd screener-service
pip install -r requirements.txt
python src/main.py

# Run tests:
cd screener-service
pytest
```

**Endpoints:**
- `GET /health` - Returns `{"status": "ok", "timestamp": "..."}`

---

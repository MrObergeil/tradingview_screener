(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[70004,62526,89828],{780744:e=>{e.exports={dialog:"dialog-aRAWUDhF",rounded:"rounded-aRAWUDhF",shadowed:"shadowed-aRAWUDhF",fullscreen:"fullscreen-aRAWUDhF",darker:"darker-aRAWUDhF",backdrop:"backdrop-aRAWUDhF"}},683917:e=>{e.exports={loader:"loader-UL6iwcBa",static:"static-UL6iwcBa",item:"item-UL6iwcBa","tv-button-loader":"tv-button-loader-UL6iwcBa",medium:"medium-UL6iwcBa",small:"small-UL6iwcBa",black:"black-UL6iwcBa",white:"white-UL6iwcBa",gray:"gray-UL6iwcBa",primary:"primary-UL6iwcBa"}},754012:e=>{e.exports={wrapper:"wrapper-IxbWWcJ6"}},388786:e=>{e.exports={wrapper:"wrapper-s8CtYxJY"}},54556:e=>{e.exports={wrapper:"wrapper-f5AG7ek_"}},26640:e=>{e.exports={wrapper:"wrapper-zdLHyPLq"}},529982:e=>{e.exports={wrap:"wrap-HXzRntFl",input:"input-HXzRntFl",box:"box-HXzRntFl",hoverDot:"hoverDot-HXzRntFl",red:"red-HXzRntFl",blue:"blue-HXzRntFl",green:"green-HXzRntFl",orange:"orange-HXzRntFl",purple:"purple-HXzRntFl",cyan:"cyan-HXzRntFl",pink:"pink-HXzRntFl",large:"large-HXzRntFl",pickerDot:"pickerDot-HXzRntFl"}},191705:e=>{e.exports={wrapper:"wrapper-BZLCGWlx",buttons:"buttons-BZLCGWlx",colorSelectButton:"colorSelectButton-BZLCGWlx"}},44021:e=>{e.exports={wrapper:"wrapper-xPNB6vOB",selector:"selector-xPNB6vOB",arrowLeft:"arrowLeft-xPNB6vOB",colorSelectButton:"colorSelectButton-xPNB6vOB",popup:"popup-xPNB6vOB"}},31519:e=>{e.exports={wrap:"wrap-erqqoDve",uiMarker:"uiMarker-erqqoDve",red:"red-erqqoDve",blue:"blue-erqqoDve",green:"green-erqqoDve",orange:"orange-erqqoDve",purple:"purple-erqqoDve",cyan:"cyan-erqqoDve",pink:"pink-erqqoDve",uiMarker__small:"uiMarker__small-erqqoDve"}},992473:e=>{e.exports={"tablet-normal-breakpoint":"(max-width: 768px)","small-height-breakpoint":"(max-height: 360px)","tablet-small-breakpoint":"(max-width: 440px)"}},965734:e=>{e.exports={item:"item-GJX1EXhk",interactive:"interactive-GJX1EXhk",hovered:"hovered-GJX1EXhk",disabled:"disabled-GJX1EXhk",active:"active-GJX1EXhk",shortcut:"shortcut-GJX1EXhk",normal:"normal-GJX1EXhk",big:"big-GJX1EXhk",iconCell:"iconCell-GJX1EXhk",icon:"icon-GJX1EXhk",content:"content-GJX1EXhk",label:"label-GJX1EXhk",checked:"checked-GJX1EXhk",toolbox:"toolbox-GJX1EXhk",showToolboxOnHover:"showToolboxOnHover-GJX1EXhk",arrowIcon:"arrowIcon-GJX1EXhk",subMenu:"subMenu-GJX1EXhk",invisibleHotkey:"invisibleHotkey-GJX1EXhk"}},841220:e=>{e.exports={"tablet-normal-breakpoint":"(max-width: 768px)","tooltip-offset":"20px",dialog:"dialog-qyCw0PaN",dragging:"dragging-qyCw0PaN",mobile:"mobile-qyCw0PaN",fullscreen:"fullscreen-qyCw0PaN",dialogAnimatedAppearance:"dialogAnimatedAppearance-qyCw0PaN",dialogAnimation:"dialogAnimation-qyCw0PaN",dialogTooltip:"dialogTooltip-qyCw0PaN"}},762442:e=>{e.exports={item:"item-WJDah4zD",emptyIcons:"emptyIcons-WJDah4zD",loading:"loading-WJDah4zD",disabled:"disabled-WJDah4zD",interactive:"interactive-WJDah4zD",hovered:"hovered-WJDah4zD",normal:"normal-WJDah4zD",big:"big-WJDah4zD",icon:"icon-WJDah4zD",label:"label-WJDah4zD",title:"title-WJDah4zD",nested:"nested-WJDah4zD",
shortcut:"shortcut-WJDah4zD",remove:"remove-WJDah4zD"}},124217:e=>{e.exports={separator:"separator-Ymxd0dt_"}},604047:e=>{e.exports={"default-drawer-min-top-distance":"100px",wrap:"wrap-_HnK0UIN",positionBottom:"positionBottom-_HnK0UIN",backdrop:"backdrop-_HnK0UIN",drawer:"drawer-_HnK0UIN",positionLeft:"positionLeft-_HnK0UIN"}},989191:(e,t,s)=>{"use strict";s.d(t,{LIST_COLORS:()=>u,ListColor:()=>o,changeDescription:()=>E,createCrossTabSyncMiddleware:()=>M,getCommands:()=>I,getListByColor:()=>T,getSymbolColor:()=>N,getSymbolsByColor:()=>F,getTimestamp:()=>P,isListColor:()=>m,markMany:()=>f,reducer:()=>L,remove:()=>C,rename:()=>S,renameSeparator:()=>w,reset:()=>y,setup:()=>b,share:()=>D,shiftCommand:()=>k,updatePersistedState:()=>x});var o,n=s(655091),i=s(438253),r=s(650151),a=s(199669),l=s(50991),c=s(340958),d=s(173777),h=s(559986);!function(e){e.Red="red",e.Blue="blue",e.Green="green",e.Orange="orange",e.Purple="purple",e.Cyan="cyan",e.Pink="pink"}(o||(o={}));const u=[o.Red,o.Blue,o.Green,o.Orange,o.Purple,o.Cyan,o.Pink];function m(e){return new Set(u).has(e)}const p={lists:{colors:[],byColor:{},bySymbol:{}},commands:[],timestamp:null};function g(e,t){const{lists:s}=e,o=s.byColor[t];o&&0===o.symbols.length&&(s.colors=s.colors.filter((e=>e!==t)))}function _(e){return(0,d.isSeparatorItem)(e)}const v=(0,n.createSlice)({name:"marked-lists",initialState:p,reducers:{setup:(e,t)=>{const{lists:s,timestamp:o}=t.payload,n={lists:{colors:[],byColor:{},bySymbol:{}},commands:[],timestamp:null};n.timestamp=o;for(const e of function(e,t){return[...e].sort(((e,s)=>t.indexOf(e.color)-t.indexOf(s.color)))}(s,u)){const t=e.symbols.filter((t=>void 0===n.lists.bySymbol[t]&&(_(t)||(n.lists.bySymbol[t]=e.color),!0)));n.lists.byColor[e.color]={color:e.color,name:e.name,description:e.description,shared:e.shared,symbols:t,persistedState:e.persistedState},t.length>0&&n.lists.colors.push(e.color)}return n},remove:(e,t)=>{const{color:s,symbols:o,silent:n}=t.payload,{lists:a,commands:l}=e,d=a.byColor[s];if(void 0===d||0===d.symbols.length)return;const h=new Set(o),u=d.symbols.filter((e=>!h.has(e)));if(!(0,c.equalArrays)(u,d.symbols)){d.symbols=u;for(const e of h)delete a.bySymbol[e];n||l.push({type:"remove",color:s,symbols:[...h],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}),g(e,s)}},markMany:(e,t)=>{const{color:s,before:o,silent:n}=t.payload,{lists:a,commands:l}=e,{unique:d,exclusions:u}=function(e,t){const{color:s,symbols:o,separators:n}=t.payload,{lists:i}=e,a={},l=new Set,c=e=>_(e)?((0,r.assert)(null!==s),s):i.bySymbol[e];for(let e=0;e<o.length;++e){const t=o[e];if(l.has(t)||_(t)&&!n)continue;l.add(t);const s=c(t);void 0!==s&&(a[s]=a[s]??new Set).add(t)}return{exclusions:a,unique:l}}(e,t);if(0===d.size)return;const m=function(e,t,s,o){const{color:n,before:i}=t.payload,{lists:r}=e;let a;if(null!==n&&void 0!==i&&s.has(i)){const e=r.byColor[n];if(void 0!==e){a=o;for(let t=e.symbols.indexOf(i);t>=0;--t)if(!s.has(e.symbols[t])){a=e.symbols[t];break}}}return a}(e,t,d,h.LIST_START);if(null!==s&&void 0!==u[s]&&1===Object.keys(u).length){
const t=a.byColor[s];(0,r.assert)(void 0!==t);const p=t.symbols.filter((e=>!d.has(e))),v=(0,h.getTargetIndex)(p,o,m);if(void 0===v?p.push(...d):p.splice(v,0,...d),(0,c.equalArrays)(p,t.symbols))return;{const o=u[s];(0,r.assert)(void 0!==o),t.symbols=p;for(const e of o)delete a.bySymbol[e];for(const e of d)_(e)||(a.bySymbol[e]=s);return g(e,s),void(n||l.push({type:"replace",color:s,symbols:[...t.symbols],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))}}for(const t in u){if(!u.hasOwnProperty(t))continue;const s=u[t];(0,r.assert)(void 0!==s);const o=a.byColor[t];(0,r.assert)(void 0!==o),o.symbols=o.symbols.filter((e=>!s.has(e)||(delete a.bySymbol[e],!1))),g(e,t)}if(null===s)return void(n||l.push({type:"reset",symbols:[...d],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}));const p=a.byColor[s];if(a.colors.includes(s)){(0,r.assert)(void 0!==p);const t=(0,h.getTargetIndex)(p.symbols,o,m);void 0===t?(p.symbols.push(...d),n||(void 0===u[s]?l.push({type:"append",color:s,symbols:[...d],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}):l.push({type:"replace",color:s,symbols:[...p.symbols],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))):(p.symbols.splice(t,0,...d),n||l.push({type:"replace",color:s,symbols:[...p.symbols],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))}else void 0===p?a.byColor[s]={color:s,symbols:[...d],name:null,description:null,shared:!1,persistedState:null}:p.symbols=[...d],a.colors.push(s),n||l.push({type:"append",color:s,symbols:[...d],prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists});for(const e of d)_(e)||(a.bySymbol[e]=s)},renameSeparator:(e,t)=>{const{color:s,separator:o,name:n,silent:a}=t.payload;if(o===n||!_(o)||!_(n))return;const l=e.lists.byColor[s];(0,r.assert)(void 0!==l);const c=l.symbols.indexOf(o);-1!==c&&-1===l.symbols.indexOf(n)&&(l.symbols.splice(c,1,n),a||e.commands.push({type:"rename-separator",color:s,separator:o,name:n,prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))},rename:(e,t)=>{const{name:s,color:o,silent:n}=t.payload,a=e.lists.byColor[o];(0,r.assert)(void 0!==a),a.name!==s&&(a.name=s,n||e.commands.push({type:"rename",color:o,name:s,prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))},changeDescription:(e,t)=>{const{color:s,description:o,silent:n}=t.payload,a=e.lists.byColor[s];(0,r.assert)(void 0!==a),a.description!==o&&(a.description=o,n||e.commands.push({type:"change-description",color:s,description:o,prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))},reset:(e,t)=>{const{silent:s}=t.payload,{lists:o}=e;for(const e of u){const t=o.byColor[e];void 0!==t&&(t.symbols=[])}o.colors=[],o.bySymbol={},s||e.commands.push({type:"reset-all",prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists})},share:(e,t)=>{const{lists:s,commands:o}=e,{shared:n,color:a,silent:l}=t.payload,c=s.byColor[a];void 0!==c&&c.shared!==n&&(c.shared=n,l||o.push({type:"share",color:a,shared:n,prevLists:(0,r.ensureDefined)((0,i.original)(e)).lists}))},updatePersistedState:(e,t)=>{const{lists:s}=e;for(const e of u){
const o=s.byColor[e],n=t.payload[e];void 0!==o&&o.persistedState&&n&&(o.persistedState={...o.persistedState,...n})}},shiftCommand:(e,t)=>{const{count:s}=t.payload;e.commands.splice(0,s)}}}),{markMany:f,setup:b,reset:y,remove:C,rename:S,changeDescription:E,renameSeparator:w,shiftCommand:k,share:D,updatePersistedState:x}=v.actions,{reducer:L}=v;function M(e,t,s=v){return(0,a.createCrossTabSyncMiddleware)({id:e,channel:t,event:"marked-list-cross-tab-sync",filter:e=>function(e,t){return t.actions.markMany.match(e)||t.actions.rename.match(e)||t.actions.changeDescription.match(e)||t.actions.remove.match(e)||t.actions.setup.match(e)||t.actions.renameSeparator.match(e)||t.actions.reset.match(e)||t.actions.share.match(e)||t.actions.updatePersistedState.match(e)}(e,s)})}function N(e,t){return e.lists.bySymbol[l.qualified.cast(t)]??null}function T(e,t){return e.lists.byColor[t]??null}function F(e,t){return T(e,t)?.symbols??null}function I(e){return e.commands}function P(e){return e.timestamp}},812399:(e,t,s)=>{"use strict";s.d(t,{ColorSelector:()=>y});var o=s(50959),n=s(989191),i=s(591800),r=s(451608),a=s(670112),l=s(278846),c=s(497754),d=s.n(c),h=s(79205),u=s(444372),m=s(948019),p=s(263361),g=s(676809),_=s(24122),v=s(529982);const f=(0,r.makeSwitchGroupItem)((function(e){const{className:t,value:i=n.ListColor.Red,name:r,checked:a}=e,[l,c]=(0,p.useRovingTabindexElement)(null),f=(0,o.useContext)(m.ContextMenuContext),b=f?.type??"menu",y=i;return o.createElement("label",{ref:l,tabIndex:c,className:d()(t,v.wrap,"drawer"===b&&v.large),"data-color":y,role:"menuitem","aria-label":u.t(null,{replace:{color:y}},s(958673)),"aria-checked":a},o.createElement("input",{className:v.input,type:"radio",name:r,value:i,checked:a,onChange:function(){e.onChange&&e.onChange(i)},onClick:a?function(){e.onClickIfChecked&&e.onClickIfChecked(i)}:void 0}),o.createElement("div",{className:d()(v.box,v[y],"drawer"===b&&v.large)},a?o.createElement(h.Icon,{icon:g}):o.createElement("div",{className:v.pickerDot},o.createElement(h.Icon,{className:v.hoverDot,icon:_}))))})),b=[39,37,13,32,27];function y(e){const{buttonClassName:t,value:s,onSelectedClick:c,fromKeyboard:d}=e,h=(0,o.useRef)(null),u=(0,o.useCallback)((e=>{if(!h.current||e.defaultPrevented)return;const t=(0,i.hashFromEvent)(e);if(!b.includes(t))return;e.preventDefault();const o=(0,a.queryFocusableElements)(h.current).sort(a.navigationOrderComparator),r=o.findIndex((e=>e===document.activeElement));if(-1===r)return;const c=o[r];let d;switch(t){case 13:case 32:p(c.dataset.color||n.ListColor.Red);break;case 27:p(s)}switch((0,a.mapKeyCodeToDirection)(t)){case"inlineNext":d=o[r+1]||o[0];break;case"inlinePrev":d=o[r-1]||o[o.length-1]}d instanceof HTMLLabelElement&&((0,l.becomeSecondaryElement)(c),(0,l.becomeMainElement)(d),d.focus())}),[]);(0,o.useLayoutEffect)((()=>{if(!d)return;const e=document.activeElement,t=h.current;if(!t)return;const[s]=(0,a.queryFocusableElements)(t).sort(a.navigationOrderComparator);return s?((0,l.becomeMainElement)(s),s.focus(),()=>{e instanceof HTMLElement&&e.focus()}):void 0}),[])
;const m=n.LIST_COLORS.map(((e,s)=>o.createElement(f,{key:s,className:t,onClickIfChecked:c,value:e})));return o.createElement("menu",{ref:h,onKeyDown:u},o.createElement(r.SwitchGroup,{name:"color-selector",onChange:p,values:void 0!==s?[s]:[]},m));function p(t){e.onChange&&void 0!==t&&e.onChange(t)}}},419997:(e,t,s)=>{"use strict";s.d(t,{flaggedSymbolColorName:()=>i});var o=s(989191),n=s(444372);function i(e){switch(e){case o.ListColor.Red:return n.t(null,void 0,s(653893));case o.ListColor.Green:return n.t(null,void 0,s(831313));case o.ListColor.Blue:return n.t(null,void 0,s(747414));case o.ListColor.Orange:return n.t(null,void 0,s(721149));case o.ListColor.Purple:return n.t(null,void 0,s(321564));case o.ListColor.Cyan:return n.t(null,void 0,s(84535));case o.ListColor.Pink:return n.t(null,void 0,s(996355))}}},563233:(e,t,s)=>{"use strict";s.d(t,{LabelColorSelector:()=>a});var o=s(50959),n=s(812399),i=s(859457),r=s(191705);class a extends o.PureComponent{constructor(){super(...arguments),this._onChange=e=>{this.props.onChange(e)}}render(){const{value:e}=this.props;return o.createElement("span",{className:r.wrapper},o.createElement("span",{className:r.buttons,onClick:i.preventDefault},o.createElement(n.ColorSelector,{buttonClassName:r.colorSelectButton,value:e,onChange:this._onChange,onSelectedClick:this._onChange})))}}},589828:(e,t,s)=>{"use strict";s.d(t,{PopupColorSelector:()=>C});var o=s(50959),n=s(670797),i=s(642709),r=s(18182),a=s(332585),l=s(67812),c=s(762852),d=s(680574),h=s(707533),u=s(812399),m=s(778785),p=s(44021);class g extends o.PureComponent{constructor(){super(...arguments),this._popUpElem=null,this._onChange=e=>{this.props.onSelectColor(e),this.props.hide()},this._onTargetMouseLeave=e=>{const t=!!e.relatedTarget.nodeName,s=e.relatedTarget===this._popUpElem,o=this._popUpElem&&t&&this._popUpElem.contains(e.relatedTarget);s||o||this.props.hide()},this._onPopUpMouseLeave=e=>{const t=!!e.nativeEvent.relatedTarget.nodeName,s=e.nativeEvent.relatedTarget===this.props.elem,o=t&&this.props.elem.contains(e.nativeEvent.relatedTarget);s||o||this.props.hide()},this._onTouchStart=e=>{const t=!!e.target.nodeName,s=e.target===this.props.elem,o=e.target===this._popUpElem,n=t&&this.props.elem.contains(e.target),i=this._popUpElem&&t&&this._popUpElem.contains(e.target);s||n||o||i||this.props.hide()},this._setPopUpElem=e=>{this._popUpElem=e}}componentDidMount(){document.documentElement&&(m.mobiletouch?document.documentElement.addEventListener("touchstart",this._onTouchStart):(this.props.elem.addEventListener("mouseleave",this._onTargetMouseLeave),document.body.addEventListener("scroll",this.props.hide)))}componentWillUnmount(){document.documentElement&&(m.mobiletouch?document.documentElement.removeEventListener("touchstart",this._onTouchStart):this.props.elem&&(this.props.elem.removeEventListener("mouseleave",this._onTargetMouseLeave),document.documentElement.removeEventListener("scroll",this.props.hide)))}render(){const e={top:0,left:0};if(this.props.elem){const t=this.props.elem.getBoundingClientRect()
;e.top=t.top+t.height/2,e.left=t.left+((0,d.isRtl)()?0:t.width)}return o.createElement(h.Portal,null,o.createElement("div",{style:e,className:p.popup,ref:this._setPopUpElem,onMouseLeave:m.mobiletouch?void 0:this._onPopUpMouseLeave},o.createElement("div",{className:p.wrapper},o.createElement("div",{className:p.selector},o.createElement("div",{className:p.arrowLeft}),o.createElement(u.ColorSelector,{buttonClassName:p.colorSelectButton,value:this.props.currentColor,fromKeyboard:this.props.fromKeyboard,onChange:this._onChange})))))}}var _=s(948019);function v(e){const{actions:t,...s}=e;return o.createElement(r.MatchMedia,{rule:i.DialogBreakpoints.TabletSmall},(e=>e&&t?o.createElement(a.DrawerManager,null,o.createElement(_.ContextMenuContext.Provider,{value:{type:"drawer"}},o.createElement(c.Drawer,{onClose:s.hide,position:"Bottom"},o.createElement(l.ContextMenuList,{items:t})))):o.createElement(g,{...s})))}var f=s(631456);let b=null,y=null;var C;!function(e){function t(){b&&y?.unmount()}e.show=function(e){b||(b=document.createElement("div")),t(),y=(0,f.createReactRoot)(o.createElement(n.SlotContext.Provider,{value:e.manager||null},o.createElement(v,{...e,hide:t})),b)},e.hide=t}(C||(C={}))},226223:(e,t,s)=>{"use strict";s.d(t,{SymbolMarker:()=>b,createSymbolMarkerStandalone:()=>C});s(7742);var o=s(126491),n=s(250447),i=s(589828),r=s(825131),a=s(642709),l=s(50959),c=s(444372),d=s(989191),h=s(563233),u=s(996622),m=s(779923),p=s(494966),g=s(345848),_=s(975810),v=s(419997);function f(e,t,o,n){const i=function(e,t,o,n){const i=c.t(null,void 0,s(160589)).format({symbol:(0,p.safeShortName)(t)}),r=e.getSymbolColor(t)||void 0,a={},m=d.LIST_COLORS.map((e=>{const t=new u.Action({actionId:"Watchlist.ChangeFlaggedGroupColor",options:{label:(0,v.flaggedSymbolColorName)(e),onExecute:()=>f(e),checkable:!0,checked:e===r}});return a[e]=t,t})),f=s=>{n(),(0,_.runOrSigninWithFeature)((()=>{o.setColor(s),e.setSymbolsColor([t],o.getColor()),(0,g.trackEvent)("Watchlist","Context menu","Flag"),d.LIST_COLORS.forEach((e=>{a[e].update({checked:e===o.getColor()})}))}),{feature:"flaggedSymbolsColors",source:"Set symbol color"})},b={doNotCloseOnClick:!0};return[new u.Action({actionId:"Watchlist.FlagSymbol",options:{label:i,onExecute:()=>f(o.getColor())}}),new u.Action({actionId:"Watchlist.ChangeFlaggedGroupColor",options:{...b,label:c.t(null,void 0,s(84151)),subItems:m},customActionOptions:{...b,jsxLabel:l.createElement(h.LabelColorSelector,{value:r,onChange:f})}})]}(e,t,o,n);return null!==e.getSymbolColor(t)&&i.push(function(e,t){return new u.Action({actionId:"Watchlist.UnflagSymbol",options:{label:c.t(null,void 0,s(967047)).format({symbol:(0,p.safeShortName)(t)}),onExecute:()=>{e.setSymbolsColor([t],null),(0,g.trackEvent)("Watchlist","Context menu","Unflag")}}})}(e,t)),i.push(function(e){return new u.Action({actionId:"Watchlist.UnflagAllSymbols",options:{label:c.t(null,void 0,s(429678)),onExecute:()=>{var t;t=()=>{e.clearAllSymbolsColor()},(0,m.showConfirm)({text:c.t(null,void 0,s(173837)),onConfirm:({dialogClose:e})=>{t(),e()}}),(0,
g.trackEvent)("Watchlist","Context menu","Unflag all")}}})}(e)),i}class b{constructor(e){this._service=(0,n.getMarkedSymbolsListServiceInstance)(),this._colorManager=new r.ColorManager({context:r.ColorContext.SymbolMarker}),this._classes=[],this._onClick=e=>{e.preventDefault();const t=()=>{const t=f(this._service,this._symbol,this._colorManager,i.PopupColorSelector.hide),s=this._colorManager.getColor(),o={elem:this._uimarker.getElem(),currentColor:s,onSelectColor:this._onSelectColor,actions:t,manager:this._opts.manager,fromKeyboard:e instanceof KeyboardEvent};window.matchMedia(a.DialogBreakpoints.TabletSmall).matches?i.PopupColorSelector.show(o):null===this._color?(i.PopupColorSelector.show(o),this._service.setSymbolsColor([this._symbol],s)):(i.PopupColorSelector.hide(),this._service.setSymbolsColor([this._symbol],null))},s=window.is_authenticated;(0,_.runOrSigninWithFeature)((()=>{s&&(this._opts.onClick?this._opts.onClick(this._symbol,t):t())}),{feature:"flaggedSymbolsColors",source:"Set symbol color"})},this._onSelectColor=e=>{this._colorManager.setColor(e),this._service.setSymbolsColor([this._symbol],this._colorManager.getColor())},this._onDblClick=e=>{e.preventDefault()},this._onChange=()=>{this._setState(this._service.getSymbolColor(this._symbol))},this._opts=e,this._symbol=e.symbol,this._color=e.color||this._service.getSymbolColor(this._symbol),this._uimarker=new o.UiMarker({color:this._color,container:e.container,onClick:this._onClick,onDblClick:this._onDblClick,specialImage:e.specialImage}),e.className&&this.setClassName(e.className),null!==this._color&&this._addActiveClassName(),this._service.onSymbolChange(this._symbol,this._onChange)}updateSubscription(){this._setState(this._service.getSymbolColor(this._symbol))}bindTo(e,t){this._service.offSymbolChange(this._symbol,this._onChange),this._symbol=e,this._uimarker.appendTo(t),this._setState(this._service.getSymbolColor(e)),this._service.onSymbolChange(e,this._onChange)}unbind(){this._service.offSymbolChange(this._symbol,this._onChange),this._uimarker.detach()}getElem(){return this._uimarker.getElem()}isMarked(){return null!==this._color}setClassName(e){this._uimarker.getElem().classList.remove(...this._classes),this._classes=e.split(" ").filter(Boolean),this._uimarker.getElem().classList.add(...this._classes)}destroy(){this.unbind(),delete this._uimarker,delete this._opts}toggle(e){this._onClick(e)}_setState(e){const t=this.isMarked();this._color=e,null!==this._color?(this._uimarker.setColor(this._color),this._addActiveClassName()):(this._uimarker.removeColor(),this._removeActiveClassName()),void 0!==this._opts.onMarkedChanged&&t!==this.isMarked()&&this._opts.onMarkedChanged()}_addActiveClassName(){this._opts.activeClassName&&this._uimarker.addClass(this._opts.activeClassName)}_removeActiveClassName(){this._opts.activeClassName&&this._uimarker.removeClass(this._opts.activeClassName)}}class y extends b{constructor(e){super(e),this._onInit=()=>{this.updateSubscription()},this._service.onInit(this._onInit)}destroy(){this._service.offInit(this._onInit),
super.destroy()}}function C(e){return new y(e)}},126491:(e,t,s)=>{"use strict";s.d(t,{UiMarker:()=>l});var o=s(989191),n=s(778785),i=s(497754),r=s(904799),a=s(31519);class l{constructor(e){this._onClick=e=>{this._opts.onClick&&this._opts.onClick(e)},this._onDblClick=e=>{this._opts.onDblClick&&this._opts.onDblClick(e)},this._container=e.container,this._opts=e,this._elem=this._render(e),this._addEventListeners()}setColor(e){this.removeColor(),this.addClass(a[e])}removeColor(){this._elem.classList.remove(a[o.ListColor.Red],a[o.ListColor.Orange],a[o.ListColor.Purple],a[o.ListColor.Green],a[o.ListColor.Blue],a[o.ListColor.Cyan],a[o.ListColor.Pink])}addClass(e){this._elem.classList.add(e)}removeClass(e){this._elem.classList.remove(e)}getElem(){return this._elem}appendTo(e){this.detach(),this._container=e,this._container.appendChild(this._elem),this._addEventListeners()}detach(){this._removeEventListeners(),this._container&&(this._container.removeChild(this._elem),delete this._container)}_render(e){const t=i(a.uiMarker,{[e.className]:Boolean(e.className),[a[e.color]]:Boolean(e.color)}),s=e.specialImage||r,o=document.createElement("div");return o.className=t,o.innerHTML=s,this._container&&this._container.appendChild(o),o}_addEventListeners(){if(this._opts.onClick){const e=n.mobiletouch?"touchstart":"click";this._elem.addEventListener(e,this._onClick)}this._opts.onDblClick&&this._elem.addEventListener("dblclick",this._onDblClick)}_removeEventListeners(){if(this._opts.onClick){const e=n.mobiletouch?"touchstart":"click";this._elem.removeEventListener(e,this._onClick)}this._opts.onDblClick&&this._elem.removeEventListener("dblclick",this._onDblClick)}}},559986:(e,t,s)=>{"use strict";s.d(t,{LIST_START:()=>o,getTargetIndex:()=>n});const o=Symbol();function n(e,t,s){const n=void 0===s?void 0!==t?e.indexOf(t):void 0:s===o?0:e.indexOf(s)+1;return-1!==n?n:void 0}},199669:(e,t,s)=>{"use strict";function o(e){const{id:t,event:s,channel:o,filter:n}=e;return e=>(o.on(s,(s=>{const{action:o,emitter:i}=JSON.parse(s);i!==t&&n(o)&&e.dispatch({...o,payload:{...o.payload,silent:!0}})})),e=>i=>{const r=e(i);return n(i)&&(i.payload.silent||o.emit(s,JSON.stringify({action:i,emitter:t}))),r})}s.d(t,{createCrossTabSyncMiddleware:()=>o})},50991:(e,t,s)=>{"use strict";s.d(t,{qualified:()=>o});const o={cast:e=>e,castMany:e=>e.map(o.cast)}},340958:(e,t,s)=>{"use strict";function o(e,t){if(e.length!==t.length)return!1;for(let s=0;s<e.length;++s)if(e[s]!==t[s])return!1;return!0}s.d(t,{equalArrays:()=>o})},150447:(e,t,s)=>{"use strict";s.d(t,{Dialog:()=>h});var o=s(50959),n=s(497754),i=s.n(n),r=s(692822),a=s(351290),l=s(8626),c=s(780744),d=s.n(c);class h extends o.PureComponent{constructor(){super(...arguments),this._manager=new a.OverlapManager,this._handleSlot=e=>{this._manager.setContainer(e)}}render(){const{rounded:e=!0,shadowed:t=!0,fullscreen:s=!1,darker:n=!1,className:a,backdrop:c,containerTabIndex:h=-1}=this.props,u=i()(a,d().dialog,e&&d().rounded,t&&d().shadowed,s&&d().fullscreen,n&&d().darker),m=(0,
l.filterDataProps)(this.props),p=this.props.style?{...this._createStyles(),...this.props.style}:this._createStyles();return o.createElement(o.Fragment,null,o.createElement(r.SlotContext.Provider,{value:this._manager},c&&o.createElement("div",{onClick:this.props.onClickBackdrop,className:d().backdrop}),o.createElement("div",{...m,className:u,style:p,ref:this.props.reference,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onClick:this.props.onClick,onKeyDown:this.props.onKeyDown,tabIndex:h,"aria-label":this.props.containerAriaLabel},this.props.children)),o.createElement(r.Slot,{reference:this._handleSlot}))}_createStyles(){const{bottom:e,left:t,width:s,right:o,top:n,zIndex:i,height:r}=this.props;return{bottom:e,left:t,right:o,top:n,zIndex:i,maxWidth:s,height:r}}}},405964:(e,t,s)=>{"use strict";s.d(t,{useFocus:()=>n});var o=s(50959);function n(e,t){const[s,n]=(0,o.useState)(!1);(0,o.useEffect)((()=>{t&&s&&n(!1)}),[t,s]);const i={onFocus:(0,o.useCallback)((function(t){void 0!==e&&e.current!==t.target||n(!0)}),[e]),onBlur:(0,o.useCallback)((function(t){void 0!==e&&e.current!==t.target||n(!1)}),[e])};return[s,i]}},662929:(e,t,s)=>{"use strict";s.d(t,{useMergedRefs:()=>i});var o=s(50959),n=s(551080);function i(e){return(0,o.useCallback)((0,n.mergeRefs)(e),e)}},567269:(e,t,s)=>{"use strict";s.d(t,{CommonIcon:()=>n});var o=s(50959);const n=o.forwardRef(((e,t)=>{const{className:s,ariaLabel:n,ariaLabelledby:i,title:r,icon:a="",...l}=e,c=l,d=!(!n&&!i);return o.createElement("span",{"aria-label":n,"aria-labelledby":i,"aria-hidden":!d,ref:t,role:"img",dangerouslySetInnerHTML:{__html:a},className:s,title:r,...c})}))},265005:(e,t,s)=>{"use strict";s.d(t,{Loader:()=>o.Loader});var o=s(386290)},386290:(e,t,s)=>{"use strict";s.d(t,{Loader:()=>l});var o=s(50959),n=s(497754),i=s.n(n),r=s(683917),a=s.n(r);function l(e){const{className:t,size:s="medium",staticPosition:n,color:r="black"}=e,l=i()(a().item,a()[r],a()[s]);return o.createElement("span",{className:i()(a().loader,n&&a().static,t)},o.createElement("span",{className:l}),o.createElement("span",{className:l}),o.createElement("span",{className:l}))}},742557:(e,t,s)=>{"use strict";s.d(t,{SkeletonRectangle:()=>l});var o=s(50959),n=s(497754),i=s.n(n),r=s(54556),a=s.n(r);function l(e){const{className:t,style:s,width:n,height:r}=e;return o.createElement("div",{className:i()(a().wrapper,t),style:{width:n,height:r,...s}})}},275016:(e,t,s)=>{"use strict";s.d(t,{Skeleton:()=>v});var o=s(50959),n=s(497754),i=s.n(n),r=s(388786),a=s.n(r);var l=s(754012),c=s.n(l);const d=24;var h=s(26640),u=s.n(h);const m=42;var p=s(742557),g=s(893996),_=s.n(g);class v extends o.PureComponent{render(){const{children:e,className:t,animated:s=!0,inputRef:n}=this.props;return o.createElement("div",{ref:n,className:i()(_().wrapper,s&&_().animated,t)},e)}}v.Container=function(e){const{className:t,style:s,children:n}=e;return o.createElement("div",{className:i()(a().wrapper,t),style:s},n)},v.Circle=function(e){const{className:t,style:s,size:n=d}=e
;return o.createElement("div",{className:i()(c().wrapper,t),style:{height:n,width:n,...s}})},v.Square=function(e){const{className:t,style:s,size:n=m}=e;return o.createElement("div",{className:i()(u().wrapper,t),style:{width:n,height:n,...s}})},v.Rectangle=p.SkeletonRectangle},576030:(e,t,s)=>{"use strict";s.d(t,{contextMenuHandler:()=>n});var o=s(542682);function n(e){const{e:t,symbols:n,tickerUrl:i,chartWidgetCollection:r,source:a,trackAddSymbolToWatchlistEvent:l}=e;t.preventDefault(),Promise.all([s.e(56316),s.e(87035),s.e(62419),s.e(86459),s.e(56254),s.e(88936),s.e(65428),s.e(61774),s.e(55015),s.e(74400),s.e(39311),s.e(81171),s.e(82835),s.e(68309),s.e(84706),s.e(54418),s.e(49281),s.e(50447),s.e(60482),s.e(44692),s.e(89828),s.e(57242),s.e(79540)]).then(s.bind(s,261836)).then((e=>{const{showContextMenu:s}=e,c=!(0,o.isTouchEvent)(t.nativeEvent);s({symbols:n,isShortcutHintShown:c,tickerUrl:i,chartWidgetCollection:r,source:a,trackAddSymbolToWatchlistEvent:l},t)}))}},542682:(e,t,s)=>{"use strict";s.d(t,{isTouchEvent:()=>n});var o=s(778785);function n(e){const t=e.sourceCapabilities;let s=t&&t.firesTouchEvents;return void 0===s&&(s=o.touch),s}},642709:(e,t,s)=>{"use strict";s.d(t,{DialogBreakpoints:()=>n});var o=s(992473);const n={SmallHeight:o["small-height-breakpoint"],TabletSmall:o["tablet-small-breakpoint"],TabletNormal:o["tablet-normal-breakpoint"]}},332450:(e,t,s)=>{"use strict";s.d(t,{CLOSE_POPUPS_AND_DIALOGS_COMMAND:()=>o,breakpointList:()=>n});const o="CLOSE_POPUPS_AND_DIALOGS_COMMAND",n=[1920,1440,1280,1024,768,480,0]},198628:(e,t,s)=>{"use strict";s.d(t,{Skeleton:()=>o.Skeleton});var o=s(275016)},306388:(e,t,s)=>{"use strict";s.d(t,{initSymbolListService:()=>r});var o=s(313266),n=s(564894),i=s(83871);function r(){return Promise.all([Promise.all([s.e(56316),s.e(90450),s.e(26184),s.e(10648),s.e(6739),s.e(91565),s.e(7204),s.e(77196),s.e(58572),s.e(61774),s.e(32227),s.e(55091),s.e(49281),s.e(71119),s.e(2373),s.e(62526),s.e(50447),s.e(60482),s.e(44692),s.e(1026)]).then(s.bind(s,999614)),Promise.all([s.e(56316),s.e(90450),s.e(26184),s.e(10648),s.e(6739),s.e(91565),s.e(7204),s.e(77196),s.e(58572),s.e(61774),s.e(32227),s.e(55091),s.e(49281),s.e(71119),s.e(2373),s.e(62526),s.e(50447),s.e(60482),s.e(44692),s.e(1026)]).then(s.bind(s,38506)),Promise.all([s.e(56316),s.e(90450),s.e(26184),s.e(10648),s.e(6739),s.e(91565),s.e(7204),s.e(77196),s.e(58572),s.e(61774),s.e(32227),s.e(55091),s.e(49281),s.e(71119),s.e(2373),s.e(62526),s.e(50447),s.e(60482),s.e(44692),s.e(1026)]).then(s.bind(s,850935)),Promise.all([s.e(56316),s.e(90450),s.e(26184),s.e(10648),s.e(6739),s.e(91565),s.e(7204),s.e(77196),s.e(58572),s.e(61774),s.e(32227),s.e(55091),s.e(49281),s.e(71119),s.e(2373),s.e(62526),s.e(50447),s.e(60482),s.e(44692),s.e(1026)]).then(s.bind(s,244692)),(0,
o.isFeaturesetEnabled)("widget")?null:Promise.all([s.e(56316),s.e(90450),s.e(26184),s.e(10648),s.e(6739),s.e(91565),s.e(7204),s.e(77196),s.e(58572),s.e(61774),s.e(32227),s.e(55091),s.e(49281),s.e(71119),s.e(2373),s.e(62526),s.e(50447),s.e(60482),s.e(44692),s.e(1026)]).then(s.bind(s,216752))]).then((([e,t,s,o,r])=>{if((0,n.hasService)(i.SYMBOL_LIST_SERVICE))return(0,n.service)(i.SYMBOL_LIST_SERVICE);const{store:a,runner:l}=e.configureStore(),c=l.run(t.symbolListRepositorySaga);(0,n.registerService)(i.SYMBOL_LIST_SERVICE,{store:a,runner:l,actions:{addSymbols:o.addSymbolsThunk,initWidget:s.initWidget,saveListAs:o.saveListAsThunk,createNewWatchList:o.userCreateWatchlistThunk},task:c});const d=(0,n.service)(i.SYMBOL_LIST_SERVICE);return null!==r&&r.getCustomSymbolListSynchronizationServiceInstance(d),d}))}},837657:(e,t,s)=>{"use strict";s.d(t,{isSeparatorItem:()=>n});var o=s(173777);function n(e){return(0,o.isSeparatorItem)(e)}},795394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{resolveSymbolName:()=>c,resolveSymbolNameForAll:()=>d,resolveSymbolNameForAllDistinct:()=>h,snapshoter:()=>a});var o=s(626166),n=s(675128),i=s(837657);const r=new Set(["pro_name","base_name","short_name","description","type","exchange","typespecs","listed_exchange","last_price","country_code","provider_id","symbol-primaryname","logoid","base-currency-logoid","currency-logoid","source-logoid","update_mode","update_mode_seconds","pro_perm","source","source2","pricescale","minmov","fractional","visible-plots-set","local_description","language","underlying-symbol"]),a=(0,n.lazyValue)((()=>new o.QuoteSessionSnapshoter({name:"basic-symbol-quotes",fields:[...r],api:window.ChartApiInstance}))),l=new Set(["pro_name"]);async function c(e){return(0,i.isSeparatorItem)(e)?e:a().getSnapshot(e,l).then((e=>"error"===e.status?e.symbolname:e.values.pro_name))}function d(e){return Promise.all(e.map(c))}function h(e){return d(e).then((e=>[...new Set(e)]))}},322654:(e,t,s)=>{"use strict";s.d(t,{DialogsOpenerManager:()=>o,dialogsOpenerManager:()=>n});class o{constructor(){this._storage=new Map}setAsOpened(e,t){this._storage.set(e,t)}setAsClosed(e){this._storage.delete(e)}isOpened(e){return this._storage.has(e)}getDialogPayload(e){return this._storage.get(e)}}const n=new o},494966:(e,t,s)=>{"use strict";s.d(t,{safeShortName:()=>n});var o=s(149340);function n(e){try{return(0,o.shortName)(e)}catch(t){return e}}},948019:(e,t,s)=>{"use strict";s.d(t,{ContextMenuContext:()=>o});const o=s(50959).createContext(null)},488653:(e,t,s)=>{"use strict";s.d(t,{DragHandler:()=>n});var o=s(686668);class n{constructor(e,t,s={boundByScreen:!0}){this._drag=null,this._canBeTouchClick=!1,this._frame=null,this._onMouseDragStart=e=>{if(0!==e.button||this._isTargetNoDraggable(e))return;e.preventDefault(),document.addEventListener("mousemove",this._onMouseDragMove),document.addEventListener("mouseup",this._onMouseDragEnd);const t=(0,o.clampPosition)((0,o.positionFromMouseEvent)(e));this._dragStart(t)},this._onTouchDragStart=e=>{if(this._isTargetNoDraggable(e))return;this._canBeTouchClick=!0,
e.preventDefault(),this._header.addEventListener("touchmove",this._onTouchDragMove,{passive:!1});const t=(0,o.clampPosition)((0,o.positionFromTouchEvent)(e));this._dragStart(t)},this._onMouseDragEnd=e=>{e.target instanceof Node&&this._header.contains(e.target)&&e.preventDefault(),document.removeEventListener("mousemove",this._onMouseDragMove),document.removeEventListener("mouseup",this._onMouseDragEnd),this._onDragStop()},this._onTouchDragEnd=e=>{this._header.removeEventListener("touchmove",this._onTouchDragMove),this._onDragStop(),this._canBeTouchClick&&(this._canBeTouchClick=!1,(0,o.simulateClick)(e.target))},this._onMouseDragMove=e=>{const t=(0,o.clampPosition)((0,o.positionFromMouseEvent)(e));this._dragMove(t)},this._onTouchDragMove=e=>{this._canBeTouchClick=!1,e.preventDefault();const t=(0,o.clampPosition)((0,o.positionFromTouchEvent)(e));this._dragMove(t)},this._onDragStop=()=>{this._drag=null,this._header.classList.remove("dragging"),this._options.onDragEnd&&this._options.onDragEnd()},this._dialog=e,this._header=t,this._options=s,this._header.addEventListener("mousedown",this._onMouseDragStart),this._header.addEventListener("touchstart",this._onTouchDragStart),this._header.addEventListener("touchend",this._onTouchDragEnd)}destroy(){null!==this._frame&&cancelAnimationFrame(this._frame),this._header.removeEventListener("mousedown",this._onMouseDragStart),document.removeEventListener("mouseup",this._onMouseDragEnd),this._header.removeEventListener("touchstart",this._onTouchDragStart),this._header.removeEventListener("touchend",this._onTouchDragEnd),document.removeEventListener("mouseleave",this._onMouseDragEnd)}updateOptions(e){this._options=e}_dragStart(e){const t=this._dialog.getBoundingClientRect();this._drag={startX:e.x,startY:e.y,finishX:e.x,finishY:e.y,dialogX:t.left,dialogY:t.top};const s=Math.round(t.left),o=Math.round(t.top);this._dialog.style.transform=`translate(${s}px, ${o}px)`,this._header.classList.add("dragging"),this._options.onDragStart&&this._options.onDragStart()}_dragMove(e){if(this._drag){if(this._drag.finishX=e.x,this._drag.finishY=e.y,null!==this._frame)return;this._frame=requestAnimationFrame((()=>{if(this._drag){const t=e.x-this._drag.startX,s=e.y-this._drag.startY;this._moveDialog(this._drag.dialogX+t,this._drag.dialogY+s)}this._frame=null}))}}_moveDialog(e,t){const s=this._dialog.getBoundingClientRect(),{boundByScreen:n}=this._options,i=(0,o.clampSegment)(e,s.width,n?0:-1/0,n?window.innerWidth:1/0),r=(0,o.clampSegment)(t,s.height,n?0:-1/0,n?window.innerHeight:1/0);this._dialog.style.transform=`translate(${Math.round(i)}px, ${Math.round(r)}px)`}_isTargetNoDraggable(e){return e.target instanceof Element&&null!==e.target.closest("[data-disable-drag]")}}},8629:(e,t,s)=>{"use strict";s.d(t,{PopupContext:()=>o});const o=s(50959).createContext(null)},62526:(e,t,s)=>{"use strict";s.d(t,{PopupDialog:()=>D});var o=s(50959),n=s(497754),i=s(650151),r=s(150447),a=s(58407),l=s(313266),c=s(368337),d=s(488653),h=s(686668);const u={vertical:0};class m{constructor(e,t){this._frame=null,
this._isFullscreen=!1,this._handleResize=()=>{null===this._frame&&(this._frame=requestAnimationFrame((()=>{this.recalculateBounds(),this._frame=null})))},this._dialog=e,this._guard=t.guard||u,this._calculateDialogPosition=t.calculateDialogPosition,this._initialHeight=e.style.height,window.addEventListener("resize",this._handleResize)}updateOptions(e){this._guard=e.guard||u,this._calculateDialogPosition=e.calculateDialogPosition}setFullscreen(e){this._isFullscreen!==e&&(this._isFullscreen=e,this.recalculateBounds())}centerAndFit(){const{x:e,y:t}=this.getDialogsTopLeftCoordinates(),s=this._calcAvailableHeight(),o=this._calcDialogHeight();if(s===o)if(this._calculateDialogPosition){const{left:e,top:t}=this._calculateDialogPosition(this._dialog,document.documentElement,this._guard);this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else this._dialog.style.height=o+"px";this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${e}px, ${t}px)`}getDialogsTopLeftCoordinates(){const{clientWidth:e,clientHeight:t}=this._getClientDimensions(),s=this._calcDialogHeight(),o=e/2-this._dialog.clientWidth/2,n=t/2-s/2+this._getTopOffset();return{x:Math.round(o),y:Math.round(n)}}recalculateBounds(){const{clientWidth:e,clientHeight:t}=this._getClientDimensions(),{vertical:s}=this._guard,o=this._calculateDialogPosition?.(this._dialog,{clientWidth:e,clientHeight:t},{vertical:s});if(this._isFullscreen){if(this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.width="100%",this._dialog.style.height="100%",this._dialog.style.transform="none",o){const{left:e,top:t,width:s,height:n}=o;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`,s&&(this._dialog.style.width=`${s}px`,this._dialog.style.minWidth="unset"),n&&(this._dialog.style.height=`${n}px`,this._dialog.style.minHeight="unset")}}else if(o){const{left:e,top:t}=o;this._dialog.style.transform=`translate(${Math.round(e)}px, ${Math.round(t)}px)`}else{this._dialog.style.width="",this._dialog.style.height="";const o=this._dialog.getBoundingClientRect(),n=t-2*s,i=(0,h.clampSegment)(o.left,o.width,0,e),r=(0,h.clampSegment)(o.top,o.height,s,t);this._dialog.style.top="0px",this._dialog.style.left="0px",this._dialog.style.transform=`translate(${Math.round(i)}px, ${Math.round(r)}px)`,this._dialog.style.height=n<o.height?n+"px":this._initialHeight}}destroy(){window.removeEventListener("resize",this._handleResize),null!==this._frame&&(cancelAnimationFrame(this._frame),this._frame=null)}_getClientDimensions(){return{clientHeight:document.documentElement.clientHeight,clientWidth:document.documentElement.clientWidth}}_getTopOffset(){return 0}_calcDialogHeight(){const e=this._calcAvailableHeight();return e<this._dialog.clientHeight?e:this._dialog.clientHeight}_calcAvailableHeight(){return this._getClientDimensions().clientHeight-2*this._guard.vertical}}var p=s(707533),g=s(8629),_=s(575658),v=s(513791),f=s(314802),b=s(281542);var y=s(12173),C=s(89317),S=s(841220)
;const E=S["tooltip-offset"],w=(0,l.isFeaturesetEnabled)("embed_resizer_overrides")?class extends m{constructor(e,t){super(e,t),this._enabled=(0,l.isFeaturesetEnabled)("embed_resizer_overrides")}_getClientDimensions(){const e=super._getClientDimensions();if(this._enabled){const t=b.EmbedViewportDimensionsProvider.getInstance().data();t&&(e.clientHeight=t.height)}return e}_getTopOffset(){if(this._enabled){const e=b.EmbedViewportDimensionsProvider.getInstance().data();if(e)return e.top}return super._getTopOffset()}}:m;class k extends o.PureComponent{constructor(e){super(e),this._dialog=null,this._cleanUpFunctions=[],this._prevActiveElement=null,this._eventDispatcher=new v.DialogEventDispatcher,this._handleDialogRef=e=>{const{reference:t}=this.props;this._dialog=e,"function"==typeof t?t(e):null!=t&&(t.current=e)},this._handleFocus=()=>{this._moveToTop()},this._handleMouseDown=e=>{this._moveToTop()},this._handleTouchStart=e=>{this._moveToTop()},this.state={canFitTooltip:!1},this._prevActiveElement=document.activeElement}render(){return o.createElement(g.PopupContext.Provider,{value:this},o.createElement(a.OutsideEvent,{mouseDown:!0,touchStart:!0,handler:this.props.onClickOutside},(e=>o.createElement("div",{ref:e,"data-outside-boundary-for":this.props.name,onFocus:this._handleFocus,onMouseDown:this._handleMouseDown,onTouchStart:this._handleTouchStart,"data-dialog-name":this.props["data-dialog-name"],"data-tooltip-show-on-focus":"true","data-qa-id":(0,C.dataQaIds)("ui-lib-PopupDialog",this.props.dataQaId)},o.createElement(r.Dialog,{style:this._applyAnimationCSSVariables(),...this.props,reference:this._handleDialogRef,className:n(S.dialog,(0,f.isOnMobileAppPage)("any")&&!this.props.noMobileAppShadows&&S.mobile,this.props.fullscreen&&S.fullscreen,this.props.className)},this.props.dialogTooltip&&this.state.canFitTooltip&&o.createElement(y.TooltipWidget,{className:S.dialogTooltip},this.props.dialogTooltip),this.props.children)))))}componentDidMount(){const{draggable:e,boundByScreen:t,onDragStart:s}=this.props,o=(0,i.ensureNotNull)(this._dialog);if(this._eventDispatcher.dispatch("dialog-open"),e){const e=o.querySelector("[data-dragg-area]");if(e&&e instanceof HTMLElement){const n=new d.DragHandler(o,e,{boundByScreen:Boolean(t),onDragStart:s});this._cleanUpFunctions.push((()=>n.destroy())),this._drag=n}}this.props.autofocus&&!o.contains(document.activeElement)&&o.focus(),(this._isFullScreen()||this.props.fixedBody)&&(0,_.setFixedBodyState)(!0);const{guard:n,calculateDialogPosition:r}=this.props;if(this.props.resizeHandler)this._resize=this.props.resizeHandler;else{const e=new w(o,{guard:n,calculateDialogPosition:r});this._cleanUpFunctions.push((()=>e.destroy())),this._resize=e}if(this._isFullScreen()&&this._eventDispatcher.dispatch("dialog-fullscreen-on"),this.props.isAnimationEnabled&&this.props.growPoint&&this._applyAppearanceAnimation(this.props.growPoint),this.props.centeredOnMount&&this._resize.centerAndFit(),this._resize.setFullscreen(this._isFullScreen()),this.props.dialogTooltip&&this._handleTooltipFit(),
this.props.shouldForceFocus){if(this.props.onForceFocus)return void this.props.onForceFocus(o);o.focus()}if(!o.contains(document.activeElement)){const e=(0,h.findDefaultFocusableElement)(o);e instanceof HTMLElement&&e.focus()}}componentDidUpdate(e){const t=e.fullscreen;if(this._resize){const{guard:e,calculateDialogPosition:t}=this.props;this._resize.updateOptions({guard:e,calculateDialogPosition:t}),this._resize.setFullscreen(this._isFullScreen())}if(this._drag&&this._drag.updateOptions({boundByScreen:Boolean(this.props.boundByScreen),onDragStart:this.props.onDragStart}),e.fullscreen!==this.props.fullscreen){const e=this.props.fullscreen;e&&!t?this._eventDispatcher.dispatch("dialog-fullscreen-on"):!e&&t&&this._eventDispatcher.dispatch("dialog-fullscreen-off")}}componentWillUnmount(){if(this.props.shouldReturnFocus&&this._prevActiveElement&&document.body.contains(this._prevActiveElement)&&(null===document.activeElement||document.activeElement===document.body||this._dialog?.contains(document.activeElement)))try{setTimeout((()=>{this._prevActiveElement.focus({preventScroll:!0})}))}catch{}for(const e of this._cleanUpFunctions)e();(this._isFullScreen()||this.props.fixedBody)&&(0,_.setFixedBodyState)(!1),this._isFullScreen()&&this._eventDispatcher.dispatch("dialog-fullscreen-off"),this._eventDispatcher.dispatch("dialog-close")}focus(){this._dialog&&this._dialog.focus()}centerAndFit(){this._resize&&this._resize.centerAndFit()}recalculateBounds(){this._resize&&this._resize.recalculateBounds()}_moveToTop(){this.props.isZIndexFixed||null!==this.context&&this.context.moveToTop()}_applyAnimationCSSVariables(){return{"--animationTranslateStartX":null,"--animationTranslateStartY":null,"--animationTranslateEndX":null,"--animationTranslateEndY":null}}_applyAppearanceAnimation(e){if(this._resize&&this._dialog){const{x:t,y:s}=e,{x:o,y:n}=this._resize.getDialogsTopLeftCoordinates();this._dialog.style.setProperty("--animationTranslateStartX",`${t}px`),this._dialog.style.setProperty("--animationTranslateStartY",`${s}px`),this._dialog.style.setProperty("--animationTranslateEndX",`${o}px`),this._dialog.style.setProperty("--animationTranslateEndY",`${n}px`),this._dialog.classList.add(S.dialogAnimatedAppearance)}}_handleTooltipFit(){if(this._resize){const e=this._resize.getDialogsTopLeftCoordinates().y-parseInt(E)>=0;this.setState({canFitTooltip:e})}}_isFullScreen(){return Boolean(this.props.fullscreen)}}k.contextType=p.PortalContext,k.defaultProps={boundByScreen:!0,draggable:!0,centeredOnMount:!0,shouldReturnFocus:!0};const D=(0,c.makeOverlapable)(k,!0)},686668:(e,t,s)=>{"use strict";s.d(t,{clampPosition:()=>r,clampSegment:()=>i,findDefaultFocusableElement:()=>d,positionFromMouseEvent:()=>l,positionFromTouchEvent:()=>c,simulateClick:()=>a});var o=s(462140),n=s(355734);function i(e,t,s,o){return e+t>o&&(e=o-t),e<s&&(e=s),e}function r(e){return{x:(0,o.clamp)(e.x,20,document.documentElement.clientWidth-20),y:(0,o.clamp)(e.y,20,window.innerHeight-20)}}function a(e){if(e instanceof SVGElement){const t=document.createEvent("SVGEvents")
;t.initEvent("click",!0,!0),e.dispatchEvent(t)}e instanceof HTMLElement&&e.click()}function l(e){return{x:e.clientX,y:e.clientY}}function c(e){return{x:e.touches[0].clientX,y:e.touches[0].clientY}}function d(e){const t=e.querySelector("[autofocus]:not([disabled])");if(t)return t;if(e.tabIndex>=0)return e;const s=(0,n.getActiveElementSelectors)(),o=Array.from(e.querySelectorAll(s)).filter((0,n.createScopedVisibleElementFilter)(e));let i=Number.NEGATIVE_INFINITY,r=null;for(let e=0;e<o.length;e++){const t=o[e],s=t.getAttribute("tabindex");if(null!==s){const e=parseInt(s,10);!isNaN(e)&&e>i&&(i=e,r=t)}}return r}},582997:(e,t,s)=>{"use strict";s.d(t,{Hint:()=>a});var o=s(50959),n=s(497754),i=s.n(n),r=s(965734);function a(e){const{text:t="",className:s}=e;return o.createElement("span",{className:i()(r.shortcut,s)},t)}},886004:(e,t,s)=>{"use strict";s.d(t,{ContextMenuItem:()=>p});var o=s(50959),n=s(497754),i=s.n(n),r=s(79205),a=s(265005),l=s(302478),c=s(582997),d=s(339750),h=s(379978),u=s(460925),m=s(762442);function p(e){const{className:t,isTitle:s,isLoading:n,isHovered:p,active:g,checkable:_,disabled:v,checked:f,icon:b,iconChecked:y,hint:C,subItems:S,label:E,styledLabel:w,onClick:k,children:D,toolbox:x,jsxLabel:L,size:M="normal"}=e,N=(0,o.useContext)(l.EmptyIconsContext),T=!!S.length;return n?o.createElement("li",{className:i()(t,m.item,m.loading,m[M])},o.createElement(a.Loader,null)):o.createElement("li",{className:i()(t,m.item,m.interactive,s&&m.title,v&&m.disabled,p&&m.hovered,g&&m.active,N&&m.emptyIcons,m[M]),onClick:k},o.createElement(r.Icon,{className:i()(m.icon),icon:function(){if(_&&f)return y||b||d;return b}()}),o.createElement("span",{className:i()(m.label)},!L&&w?w.map((({text:e,...t},s)=>o.createElement("span",{key:s,style:t},e))):L??E),!!x&&o.createElement(r.Icon,{onClick:function(){x&&x.action()},className:m.remove,icon:u}),!T&&C&&o.createElement(c.Hint,{className:m.shortcut,text:C}),T&&o.createElement(r.Icon,{className:m.nested,icon:h}),D)}},67812:(e,t,s)=>{"use strict";s.d(t,{ContextMenuList:()=>p});var o=s(50959),n=s(124217);function i(e){return o.createElement("li",{className:n.separator})}var r=s(886004),a=s(125226),l=s(762852),c=s(224743);const d=(0,a.isFeatureEnabled)("force_disable_jsx_menu_items_rendering");function h(e){const t=d?e.action:e.action.custom()??e.action,[s,n]=(0,o.useState)((()=>t.getState())),[i,a]=(0,o.useState)(!1),h=!!s.subItems.length,u=h&&i;return(0,o.useEffect)((()=>{const e=()=>n(t.getState());return t.onUpdate().subscribe(null,e),()=>{t.onUpdate().unsubscribe(null,e)}}),[]),o.createElement(r.ContextMenuItem,{...s,onClick:function(e){if(s.disabled||e.defaultPrevented)return;if(h)return void a(!0);s.doNotCloseOnClick||(0,c.globalCloseMenu)();t.execute()},isLoading:s.loading,isHovered:u},u&&o.createElement(l.Drawer,{onClose:m},o.createElement(p,{items:s.subItems,parentAction:t,closeNested:m})));function m(e){e&&e.preventDefault(),a(!1)}}var u=s(302478),m=s(366493);function p(e){
const{items:t,parentAction:s,closeNested:n}=e,a=!Boolean(s)&&t.every((e=>!Boolean("separator"!==e.type&&(e.getState().icon||e.getState().checkable))));return o.createElement(u.EmptyIconsContext.Provider,{value:a},o.createElement("ul",null,s&&o.createElement(o.Fragment,null,o.createElement(r.ContextMenuItem,{label:s.getState().label,isTitle:!0,active:!1,disabled:!1,subItems:[],checkable:!1,checked:!1,doNotCloseOnClick:!1,icon:m,onClick:n}),o.createElement(i,null)),t.map((e=>{switch(e.type){case"action":return o.createElement(h,{key:e.id,action:e});case"separator":return o.createElement(i,{key:e.id})}}))))}},302478:(e,t,s)=>{"use strict";s.d(t,{EmptyIconsContext:()=>o});const o=s(50959).createContext(!1)},332585:(e,t,s)=>{"use strict";s.d(t,{DrawerContext:()=>r,DrawerManager:()=>i});var o=s(50959),n=s(575658);class i extends o.PureComponent{constructor(e){super(e),this._isBodyFixed=!1,this._addDrawer=e=>{this.setState((t=>({stack:[...t.stack,e]})))},this._removeDrawer=e=>{this.setState((t=>({stack:t.stack.filter((t=>t!==e))})))},this.state={stack:[]}}componentDidUpdate(e,t){!t.stack.length&&this.state.stack.length&&((0,n.setFixedBodyState)(!0),this._isBodyFixed=!0),t.stack.length&&!this.state.stack.length&&this._isBodyFixed&&((0,n.setFixedBodyState)(!1),this._isBodyFixed=!1)}componentWillUnmount(){this.state.stack.length&&this._isBodyFixed&&(0,n.setFixedBodyState)(!1)}render(){return o.createElement(r.Provider,{value:{addDrawer:this._addDrawer,removeDrawer:this._removeDrawer,currentDrawer:this.state.stack.length?this.state.stack[this.state.stack.length-1]:null}},this.props.children)}}const r=o.createContext(null)},762852:(e,t,s)=>{"use strict";s.d(t,{Drawer:()=>u});var o=s(50959),n=s(650151),i=s(497754),r=s(900608),a=s(707533),l=s(332585),c=s(320116),d=s(150881),h=s(604047);function u(e){const{position:t="Bottom",onClose:s,children:d,reference:u,className:p,theme:g=h}=e,_=(0,n.ensureNotNull)((0,o.useContext)(l.DrawerContext)),[v]=(0,o.useState)((()=>(0,r.randomHash)())),f=(0,o.useRef)(null),b=(0,o.useContext)(c.CloseDelegateContext);return(0,o.useLayoutEffect)((()=>((0,n.ensureNotNull)(f.current).focus({preventScroll:!0}),b.subscribe(_,s),_.addDrawer(v),()=>{_.removeDrawer(v),b.unsubscribe(_,s)})),[]),o.createElement(a.Portal,null,o.createElement("div",{ref:u,className:i(h.wrap,h[`position${t}`])},v===_.currentDrawer&&o.createElement("div",{className:h.backdrop,onClick:s}),o.createElement(m,{className:i(g.drawer,h[`position${t}`],p),ref:f,"data-name":e["data-name"],"data-qa-id":e["data-qa-id"]},d)))}const m=(0,o.forwardRef)(((e,t)=>{const{className:s,...n}=e;return o.createElement(d.TouchScrollContainer,{className:i(h.drawer,s),tabIndex:-1,ref:t,...n})}))},891130:(e,t,s)=>{"use strict";s.d(t,{useEnsuredContext:()=>i});var o=s(50959),n=s(650151);function i(e){return(0,n.ensureNotNull)((0,o.useContext)(e))}},150881:(e,t,s)=>{"use strict";s.d(t,{TouchScrollContainer:()=>c});var o=s(50959),n=s(259142),i=s(650151),r=s(638456);const a=CSS.supports("overscroll-behavior","none");let l=0;const c=(0,o.forwardRef)(((e,t)=>{
const{children:s,...i}=e,c=(0,o.useRef)(null);return(0,o.useImperativeHandle)(t,(()=>c.current)),(0,o.useLayoutEffect)((()=>{if(r.CheckMobile.iOS())return l++,null!==c.current&&(a?1===l&&(document.body.style.overscrollBehavior="none"):(0,n.disableBodyScroll)(c.current,{allowTouchMove:d(c)})),()=>{l--,null!==c.current&&(a?0===l&&(document.body.style.overscrollBehavior=""):(0,n.enableBodyScroll)(c.current))}}),[]),o.createElement("div",{ref:c,...i},s)}));function d(e){return t=>{const s=(0,i.ensureNotNull)(e.current),o=document.activeElement;return!s.contains(t)||null!==o&&s.contains(o)&&o.contains(t)}}},513791:(e,t,s)=>{"use strict";s.d(t,{DialogEventDispatcher:()=>r});var o=s(735566),n=s(900608);const i=(0,o.getLogger)("DialogEventDispatcher");class r{constructor(){this._openSessionId=null}dispatch(e){if("dialog-open"===e){if(null!==this._openSessionId)return void i.logError("Multiple calls to open dialog");this._openSessionId=(0,n.randomHash)()}null!==this._openSessionId?(window.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:{dialogSessionId:this._openSessionId}})),"dialog-close"===e&&(this._openSessionId=null)):i.logError("Empty open dialog session id")}}},281542:(e,t,s)=>{"use strict";s.d(t,{EmbedViewportDimensionsProvider:()=>n});var o=s(313266);class n{constructor(){this._data=null,this._messageReceiver=null}startListening(){this._messageReceiver||(this._messageReceiver=e=>{if(e.data)try{const t=JSON.parse(e.data);"set-embed-resizer-overrides"===t.event&&(this._data=t.edges)}catch{}},this._addMessageListener())}destroy(){this._removeMessageListener()}data(){return this._data}static getInstance(){return this._instance||(this._instance=new n),this._instance}_addMessageListener(){this._messageReceiver&&window.addEventListener("message",this._messageReceiver)}_removeMessageListener(){this._messageReceiver&&window.removeEventListener("message",this._messageReceiver),this._messageReceiver=null}}(0,o.isFeaturesetEnabled)("embed_resizer_overrides")&&n.getInstance().startListening()},460925:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12 4h3v1h-1.04l-.88 9.64a1.5 1.5 0 0 1-1.5 1.36H6.42a1.5 1.5 0 0 1-1.5-1.36L4.05 5H3V4h3v-.5C6 2.67 6.67 2 7.5 2h3c.83 0 1.5.67 1.5 1.5V4ZM7.5 3a.5.5 0 0 0-.5.5V4h4v-.5a.5.5 0 0 0-.5-.5h-3ZM5.05 5l.87 9.55a.5.5 0 0 0 .5.45h5.17a.5.5 0 0 0 .5-.45L12.94 5h-7.9Z"/></svg>'},366493:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16.5 20L11 14.5 16.5 9"/></svg>'},379978:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" fill="none"><path stroke="currentColor" d="M8 5l3.5 3.5L8 12"/></svg>'},339750:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28" fill="none"><path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M7 15l5 5L23 9"/></svg>'},
24122:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentColor" d="M4 8a4 4 0 1 0 8 0 4 4 0 1 0-8 0"/></svg>'},676809:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M0 8a8 8 0 1 0 16 0A8 8 0 1 0 0 8zm2 0a6 6 0 1 0 12 0A6 6 0 1 0 2 8zm2 0a4 4 0 1 0 8 0 4 4 0 1 0-8 0"/></svg>'},904799:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 12" width="14" height="12" fill="currentColor" focusable="false" preserveAspectRatio="none"><path d="M14 12l-4-6 4-6H0v12z"/></svg>'}}]);